<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Python 3 with King Coding Montoo</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Fira+Code:wght@400;500;600&family=Source+Code+Pro:wght@400;500;600&family=Ubuntu+Mono:wght@400;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #306998;
            --primary-dark: #1e4566;
            --secondary: #ffd43b;
            --bg-dark: #0a0e1a;
            --bg-editor: #1a1f2e;
            --text: #e8e8e8;
            --text-dim: #8892a6;
            --success: #4ade80;
            --error: #ef4444;
            --warning: #fbbf24;
            --border: #2a3142;
        }

        .theme-light {
            --primary: #306998;
            --primary-dark: #1e4566;
            --secondary: #ffd43b;
            --bg-dark: #ffffff;
            --bg-editor: #f8f9fa;
            --text: #2d3748;
            --text-dim: #718096;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
            --border: #e2e8f0;
        }

        .theme-dark {
            --primary: #306998;
            --primary-dark: #1e4566;
            --secondary: #ffd43b;
            --bg-dark: #0a0e1a;
            --bg-editor: #1a1f2e;
            --text: #e8e8e8;
            --text-dim: #8892a6;
            --success: #4ade80;
            --error: #ef4444;
            --warning: #fbbf24;
            --border: #2a3142;
        }

        .theme-monokai {
            --primary: #66d9ef;
            --primary-dark: #4db8d8;
            --secondary: #f92672;
            --bg-dark: #1e1e1e;
            --bg-editor: #272822;
            --text: #f8f8f2;
            --text-dim: #75715e;
            --success: #a6e22e;
            --error: #f92672;
            --warning: #e6db74;
            --border: #3e3d32;
        }

        .theme-dracula {
            --primary: #bd93f9;
            --primary-dark: #9d73d9;
            --secondary: #f1fa8c;
            --bg-dark: #21222c;
            --bg-editor: #282a36;
            --text: #f8f8f2;
            --text-dim: #6272a4;
            --success: #50fa7b;
            --error: #ff5555;
            --warning: #ffb86c;
            --border: #44475a;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-editor) 100%);
            color: var(--text);
            overflow: hidden;
            height: 100vh;
            position: relative;
            transition: all 0.3s ease;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 50px, rgba(48, 105, 152, 0.03) 50px, rgba(48, 105, 152, 0.03) 51px),
                repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(48, 105, 152, 0.03) 50px, rgba(48, 105, 152, 0.03) 51px);
            pointer-events: none;
            z-index: 0;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: relative;
            z-index: 1;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255, 212, 59, 0.15) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.3); opacity: 0.8; }
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            z-index: 1;
        }

        .logo {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 2px 8px rgba(255, 212, 59, 0.4));
        }

        .app-title {
            display: flex;
            flex-direction: column;
        }

        .app-title-main {
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            font-weight: 900;
            color: var(--secondary);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
        }

        .app-title-sub {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: -2px;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .icon-btn:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.2);
        }

        .toolbar {
            background: var(--bg-editor);
            padding: 8px 12px;
            display: flex;
            gap: 8px;
            overflow-x: auto;
            border-bottom: 1px solid var(--border);
            scrollbar-width: none;
        }

        .toolbar::-webkit-scrollbar {
            display: none;
        }

        .toolbar-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-btn:active {
            transform: scale(0.96);
        }

        .toolbar-btn.run {
            background: linear-gradient(135deg, var(--success) 0%, #22c55e 100%);
            box-shadow: 0 2px 8px rgba(74, 222, 128, 0.3);
        }

        .toolbar-btn.ai {
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 32px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-logo {
            width: 120px;
            height: 120px;
            margin-bottom: 24px;
            filter: drop-shadow(0 8px 24px rgba(48, 105, 152, 0.4));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .welcome-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            font-weight: 900;
            color: var(--secondary);
            margin-bottom: 12px;
            text-shadow: 0 4px 12px rgba(255, 212, 59, 0.3);
        }

        .welcome-subtitle {
            font-size: 14px;
            color: var(--text-dim);
            margin-bottom: 32px;
            line-height: 1.6;
        }

        .welcome-features {
            display: grid;
            gap: 12px;
            width: 100%;
            max-width: 400px;
        }

        .feature-card {
            background: rgba(48, 105, 152, 0.1);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            text-align: left;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .feature-card:active {
            transform: scale(0.98);
            background: rgba(48, 105, 152, 0.15);
        }

        .feature-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .feature-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .feature-desc {
            font-size: 11px;
            color: var(--text-dim);
            line-height: 1.4;
        }

        .editor-container {
            flex: 1;
            display: none;
            flex-direction: column;
            position: relative;
        }

        .editor-container.active {
            display: flex;
        }

        .line-numbers {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 50px;
            background: rgba(0, 0, 0, 0.3);
            border-right: 1px solid var(--border);
            padding: 16px 8px;
            font-size: 12px;
            color: var(--text-dim);
            line-height: 1.5;
            user-select: none;
            overflow: hidden;
            text-align: right;
        }

        .code-editor {
            flex: 1;
            background: var(--bg-editor);
            border: none;
            color: var(--text);
            font-family: inherit;
            font-size: 14px;
            line-height: 1.5;
            padding: 16px 16px 16px 60px;
            resize: none;
            outline: none;
            tab-size: 4;
        }

        .output-container {
            height: 0;
            background: var(--bg-dark);
            border-top: 2px solid var(--primary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: height 0.3s ease;
        }

        .output-container.active {
            height: 40%;
        }

        .output-header {
            background: rgba(48, 105, 152, 0.2);
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .output-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--secondary);
        }

        .clear-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-dim);
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
        }

        .output-content {
            flex: 1;
            padding: 12px 16px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.6;
            font-family: 'JetBrains Mono', monospace;
        }

        .output-line {
            margin-bottom: 4px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .output-error {
            color: var(--error);
        }

        .output-success {
            color: var(--success);
        }

        .output-info {
            color: var(--text-dim);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(8px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: var(--bg-editor);
            border: 2px solid var(--primary);
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 16px;
            border-radius: 14px 14px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }

        .modal-body {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .settings-group {
            margin-bottom: 20px;
        }

        .settings-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
            display: block;
        }

        .settings-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            font-family: 'JetBrains Mono', monospace;
            outline: none;
        }

        .theme-preview {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 8px;
        }

        .theme-option {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 12px;
        }

        .theme-option.active {
            border-color: var(--primary);
            background: rgba(48, 105, 152, 0.1);
        }

        .theme-option:active {
            transform: scale(0.98);
        }

        .sample-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .sample-item {
            background: rgba(48, 105, 152, 0.1);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sample-item:active {
            transform: scale(0.98);
            background: rgba(48, 105, 152, 0.2);
        }

        .sample-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .sample-desc {
            font-size: 11px;
            color: var(--text-dim);
        }

        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        .status-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            display: none;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 999;
        }

        .status-indicator.active {
            display: flex;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="theme-dark">
    <div class="app-container">
        <div class="header">
            <div class="logo-section">
                <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="snakeGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#306998;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1e4566;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="snakeGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#ffd43b;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ffaa00;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M 50 10 Q 65 10 70 20 Q 72 28 70 35 L 70 50 L 50 50 L 50 30 Q 50 20 45 20 Q 40 20 40 25 L 40 45 L 30 45 L 30 30 Q 30 10 50 10 Z" fill="url(#snakeGrad1)"/>
                    <path d="M 50 90 Q 35 90 30 80 Q 28 72 30 65 L 30 50 L 50 50 L 50 70 Q 50 80 55 80 Q 60 80 60 75 L 60 55 L 70 55 L 70 70 Q 70 90 50 90 Z" fill="url(#snakeGrad2)"/>
                    <circle cx="55" cy="25" r="3" fill="#fff"/>
                    <circle cx="45" cy="75" r="3" fill="#000"/>
                </svg>
                <div class="app-title">
                    <div class="app-title-main">PYTHON 3</div>
                    <div class="app-title-sub">with King Coding Montoo</div>
                </div>
            </div>
            <div class="header-actions">
                <button class="icon-btn" onclick="showSamples()" title="Samples">üìö</button>
                <button class="icon-btn" onclick="showSettings()" title="Settings">‚öôÔ∏è</button>
            </div>
        </div>

        <div class="toolbar">
            <button class="toolbar-btn" onclick="newFile()">‚ûï New</button>
            <button class="toolbar-btn" onclick="saveFile()">üíæ Save</button>
            <button class="toolbar-btn run" onclick="runCode()">‚ñ∂Ô∏è Run</button>
            <button class="toolbar-btn" onclick="clearEditor()">üóëÔ∏è Clear</button>
            <button class="toolbar-btn ai" onclick="showAI()">ü§ñ AI Help</button>
        </div>

        <div class="main-content">
            <div class="welcome-screen" id="welcomeScreen">
                <svg class="welcome-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="wSnakeGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#306998;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1e4566;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="wSnakeGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#ffd43b;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ffaa00;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M 50 10 Q 65 10 70 20 Q 72 28 70 35 L 70 50 L 50 50 L 50 30 Q 50 20 45 20 Q 40 20 40 25 L 40 45 L 30 45 L 30 30 Q 30 10 50 10 Z" fill="url(#wSnakeGrad1)"/>
                    <path d="M 50 90 Q 35 90 30 80 Q 28 72 30 65 L 30 50 L 50 50 L 50 70 Q 50 80 55 80 Q 60 80 60 75 L 60 55 L 70 55 L 70 70 Q 70 90 50 90 Z" fill="url(#wSnakeGrad2)"/>
                    <circle cx="55" cy="25" r="3" fill="#fff"/>
                    <circle cx="45" cy="75" r="3" fill="#000"/>
                </svg>
                <div class="welcome-title">Welcome to Python 3 IDE</div>
                <div class="welcome-subtitle">
                    üëë Created by King Coding Montoo<br>
                    Your powerful Python development companion
                </div>
                <div class="welcome-features">
                    <div class="feature-card" onclick="newFile()">
                        <div class="feature-icon">üöÄ</div>
                        <div class="feature-title">Start Coding</div>
                        <div class="feature-desc">Create a new Python file and start coding instantly</div>
                    </div>
                    <div class="feature-card" onclick="showSamples()">
                        <div class="feature-icon">üí°</div>
                        <div class="feature-title">Sample Code</div>
                        <div class="feature-desc">Load example projects to practice Python programming</div>
                    </div>
                    <div class="feature-card" onclick="showAI()">
                        <div class="feature-icon">ü§ñ</div>
                        <div class="feature-title">AI Assistant</div>
                        <div class="feature-desc">Get intelligent code suggestions and debugging help</div>
                    </div>
                </div>
            </div>

            <div class="editor-container" id="editorContainer">
                <div class="line-numbers" id="lineNumbers">1</div>
                <textarea class="code-editor" id="codeEditor" placeholder="# Start coding here...
# Created by King Coding Montoo
print('Hello, Python!')" spellcheck="false"></textarea>
            </div>

            <div class="output-container" id="outputContainer">
                <div class="output-header">
                    <div class="output-title">‚ö° Output Console</div>
                    <button class="clear-btn" onclick="clearOutput()">Clear</button>
                </div>
                <div class="output-content" id="outputContent"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">‚öôÔ∏è Settings</div>
                <button class="modal-close" onclick="hideSettings()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-group">
                    <label class="settings-label">Font Family</label>
                    <select class="settings-select" id="fontSelect" onchange="changeFont()">
                        <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                        <option value="'Fira Code', monospace">Fira Code</option>
                        <option value="'Source Code Pro', monospace">Source Code Pro</option>
                        <option value="'Ubuntu Mono', monospace">Ubuntu Mono</option>
                        <option value="monospace">System Monospace</option>
                    </select>
                </div>

                <div class="settings-group">
                    <label class="settings-label">Font Size</label>
                    <select class="settings-select" id="fontSizeSelect" onchange="changeFontSize()">
                        <option value="12px">Small (12px)</option>
                        <option value="14px" selected>Medium (14px)</option>
                        <option value="16px">Large (16px)</option>
                        <option value="18px">Extra Large (18px)</option>
                    </select>
                </div>

                <div class="settings-group">
                    <label class="settings-label">Theme</label>
                    <div class="theme-preview">
                        <div class="theme-option active" data-theme="dark" onclick="changeTheme('dark')">
                            üåô Dark
                        </div>
                        <div class="theme-option" data-theme="light" onclick="changeTheme('light')">
                            ‚òÄÔ∏è Light
                        </div>
                        <div class="theme-option" data-theme="monokai" onclick="changeTheme('monokai')">
                            üé® Monokai
                        </div>
                        <div class="theme-option" data-theme="dracula" onclick="changeTheme('dracula')">
                            üßõ Dracula
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="samplesModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üìö Sample Code</div>
                <button class="modal-close" onclick="hideSamples()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="sample-list">
                    <div class="sample-item" onclick="loadSample('basic')">
                        <div class="sample-title">üéØ Basic Python</div>
                        <div class="sample-desc">Variables, print, and basic operations</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('calculator')">
                        <div class="sample-title">üî¢ Calculator</div>
                        <div class="sample-desc">Simple calculator with functions</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('loops')">
                        <div class="sample-title">üîÅ Loops & Iterations</div>
                        <div class="sample-desc">For loops, while loops, and list comprehension</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('lists')">
                        <div class="sample-title">üìù Lists & Arrays</div>
                        <div class="sample-desc">Working with lists, arrays, and data structures</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('functions')">
                        <div class="sample-title">‚ö° Functions</div>
                        <div class="sample-desc">Creating and using functions</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('classes')">
                        <div class="sample-title">üèóÔ∏è Classes & OOP</div>
                        <div class="sample-desc">Object-oriented programming basics</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('fibonacci')">
                        <div class="sample-title">üåÄ Fibonacci Series</div>
                        <div class="sample-desc">Generate Fibonacci numbers</div>
                    </div>
                    <div class="sample-item" onclick="loadSample('prime')">
                        <div class="sample-title">üî¢ Prime Numbers</div>
                        <div class="sample-desc">Check and find prime numbers</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="aiModal">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);">
                <div class="modal-title">ü§ñ AI Code Assistant</div>
                <button class="modal-close" onclick="hideAI()">√ó</button>
            </div>
            <div class="modal-body" style="padding: 16px;">
                <div style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                    <div style="font-size: 13px; line-height: 1.6;">
                        Hi! I'm your AI coding assistant. I can help you with:
                        <br>‚Ä¢ Debugging code errors
                        <br>‚Ä¢ Explaining Python concepts
                        <br>‚Ä¢ Writing functions
                        <br>‚Ä¢ Code optimization
                        <br>‚Ä¢ Best practices
                    </div>
                </div>
                <div style="text-align: center; color: var(--text-dim); font-size: 12px;">
                    AI assistant powered by Claude API.<br>
                    Use sample codes to practice Python! üöÄ
                </div>
            </div>
        </div>
    </div>

    <div class="status-indicator" id="statusIndicator">
        <span id="statusText">Ready</span>
    </div>

    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script>
        let pyodide = null;
        let pyodideLoading = false;
        let currentFont = "'JetBrains Mono', monospace";
        let currentFontSize = "14px";
        let currentTheme = "dark";

        const samples = {
            basic: `# Basic Python - Variables and Operations
# By King Coding Montoo

# Variables
x = 10
y = 20
name = "Python"

# Basic Operations
sum_result = x + y
difference = x - y
product = x * y
division = x / y

# Print results
print("Welcome to Python!")
print("x =", x)
print("y =", y)
print("Sum:", sum_result)
print("Difference:", difference)
print("Product:", product)
print("Division:", division)
print("\\nLearning", name, "is fun! üéâ")`,

            calculator: `# Simple Calculator
# By King Coding Montoo

def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b != 0:
        return a / b
    return "Error: Division by zero"

# Test the calculator
print("=== Python Calculator ===")
print("5 + 3 =", add(5, 3))
print("5 - 3 =", subtract(5, 3))
print("5 * 3 =", multiply(5, 3))
print("5 / 3 =", divide(5, 3))
print("10 / 2 =", divide(10, 2))`,

            loops: `# Loops and Iterations
# By King Coding Montoo

print("=== For Loop ===")
for i in range(1, 6):
    print(f"Count: {i}")

print("\\n=== While Loop ===")
count = 1
while count <= 5:
    print(f"Number: {count}")
    count += 1

print("\\n=== List Iteration ===")
fruits = ["Apple", "Banana", "Orange", "Mango"]
for fruit in fruits:
    print(f"I love {fruit}!")

print("\\n=== List Comprehension ===")
squares = [x**2 for x in range(1, 6)]
print("Squares:", squares)

print("\\n=== Multiplication Table ===")
num = 5
for i in range(1, 11):
    print(f"{num} x {i} = {num * i}")`,

            lists: `# Lists and Arrays
# By King Coding Montoo

# Creating lists
numbers = [1, 2, 3, 4, 5]
names = ["Alice", "Bob", "Charlie"]
mixed = [1, "hello", 3.14, True]

print("=== List Operations ===")
print("Numbers:", numbers)
print("First element:", numbers[0])
print("Last element:", numbers[-1])

# List methods
numbers.append(6)
print("After append:", numbers)

numbers.insert(0, 0)
print("After insert:", numbers)

numbers.remove(3)
print("After remove:", numbers)

# List slicing
print("\\n=== Slicing ===")
print("First 3 elements:", numbers[:3])
print("Last 3 elements:", numbers[-3:])

# List functions
print("\\n=== Functions ===")
print("Length:", len(numbers))
print("Sum:", sum(numbers))
print("Max:", max(numbers))
print("Min:", min(numbers))`,

            functions: `# Functions in Python
# By King Coding Montoo

def greet(name):
    return f"Hello, {name}!"

def square(n):
    return n ** 2

def is_even(n):
    return n % 2 == 0

def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)

# Test functions
print(greet("King Coding Montoo"))
print("Square of 5:", square(5))
print("Is 4 even?", is_even(4))
print("Is 7 even?", is_even(7))
print("Factorial of 5:", factorial(5))

# Lambda function
double = lambda x: x * 2
print("Double of 10:", double(10))`,

            classes: `# Classes and OOP
# By King Coding Montoo

class Student:
    def __init__(self, name, age, grade):
        self.name = name
        self.age = age
        self.grade = grade
    
    def display_info(self):
        print(f"Name: {self.name}")
        print(f"Age: {self.age}")
        print(f"Grade: {self.grade}")
    
    def is_adult(self):
        return self.age >= 18

class Calculator:
    def add(self, a, b):
        return a + b
    
    def multiply(self, a, b):
        return a * b

# Create objects
student1 = Student("Raj", 16, "10th")
student2 = Student("Priya", 18, "12th")

print("=== Student 1 ===")
student1.display_info()
print("Is adult?", student1.is_adult())

print("\\n=== Student 2 ===")
student2.display_info()
print("Is adult?", student2.is_adult())

print("\\n=== Calculator ===")
calc = Calculator()
print("5 + 3 =", calc.add(5, 3))
print("5 * 3 =", calc.multiply(5, 3))`,

            fibonacci: `# Fibonacci Series
# By King Coding Montoo

def fibonacci(n):
    fib_series = []
    a, b = 0, 1
    
    for i in range(n):
        fib_series.append(a)
        a, b = b, a + b
    
    return fib_series

def fibonacci_recursive(n):
    if n <= 1:
        return n
    return fibonacci_recursive(n-1) + fibonacci_recursive(n-2)

# Test Fibonacci
print("=== Fibonacci Series ===")
terms = 10
series = fibonacci(terms)
print(f"First {terms} terms:", series)

print("\\n=== Individual Terms ===")
for i in range(10):
    print(f"F({i}) = {fibonacci_recursive(i)}")

print("\\nSum of first 10 terms:", sum(series))`,

            prime: `# Prime Numbers
# By King Coding Montoo

def is_prime(n):
    if n < 2:
        return False
    for i in range(2, int(n**0.5) + 1):
        if n % i == 0:
            return False
    return True

def find_primes(limit):
    primes = []
    for num in range(2, limit + 1):
        if is_prime(num):
            primes.append(num)
    return primes

# Test prime functions
print("=== Prime Number Checker ===")
test_numbers = [2, 3, 4, 5, 10, 17, 20, 23, 29]
for num in test_numbers:
    if is_prime(num):
        print(f"{num} is prime ‚úì")
    else:
        print(f"{num} is not prime ‚úó")

print("\\n=== Prime Numbers up to 50 ===")
primes = find_primes(50)
print(primes)
print(f"\\nTotal prime numbers: {len(primes)}")`
        };

        // Initialize Pyodide with proper error handling
        async function initPyodide() {
            if (pyodideLoading) return;
            pyodideLoading = true;
            
            showStatus("Loading Python Engine...", 0);
            
            try {
                pyodide = await loadPyodide({
                    indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/"
                });
                
                // Setup stdout capture
                pyodide.setStdout({
                    batched: (text) => {
                        window.pythonOutput += text + '\n';
                    }
                });
                
                showStatus("Python Ready! ‚úì", 2000);
                console.log("Pyodide loaded successfully");
            } catch (error) {
                console.error("Pyodide load error:", error);
                showStatus("Python Loaded (Limited Mode)", 2000);
                // Will use fallback interpreter
            }
            
            pyodideLoading = false;
        }

        // Start loading Pyodide
        window.addEventListener('load', initPyodide);

        const editor = document.getElementById('codeEditor');
        const lineNumbers = document.getElementById('lineNumbers');

        editor.addEventListener('input', updateLineNumbers);
        editor.addEventListener('scroll', syncLineNumbers);
        editor.addEventListener('keydown', handleTab);

        function updateLineNumbers() {
            const lines = editor.value.split('\n').length;
            lineNumbers.innerHTML = Array.from({length: lines}, (_, i) => i + 1).join('\n');
        }

        function syncLineNumbers() {
            lineNumbers.scrollTop = editor.scrollTop;
        }

        function handleTab(e) {
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = editor.selectionStart;
                const end = editor.selectionEnd;
                editor.value = editor.value.substring(0, start) + '    ' + editor.value.substring(end);
                editor.selectionStart = editor.selectionEnd = start + 4;
                updateLineNumbers();
            }
        }

        function newFile() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('editorContainer').classList.add('active');
            editor.value = '# New Python File\n# Created by King Coding Montoo\n\nprint("Hello, World!")';
            updateLineNumbers();
            editor.focus();
        }

        function saveFile() {
            const code = editor.value;
            const fileName = prompt('Enter file name:', 'program.py');
            if (fileName) {
                const blob = new Blob([code], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                a.click();
                URL.revokeObjectURL(url);
                showStatus('File saved! ‚úì', 2000);
            }
        }

        function clearEditor() {
            if (confirm('Clear all code?')) {
                editor.value = '';
                updateLineNumbers();
                clearOutput();
            }
        }

        // Enhanced runCode with fallback interpreter
        async function runCode() {
            const code = editor.value.trim();
            if (!code) {
                showStatus('No code to run', 2000);
                return;
            }

            const outputContainer = document.getElementById('outputContainer');
            const outputContent = document.getElementById('outputContent');
            
            outputContainer.classList.add('active');
            outputContent.innerHTML = '<div class="output-line output-info">‚ñ∂Ô∏è Running code...</div>';

            // Try Pyodide first
            if (pyodide) {
                try {
                    window.pythonOutput = '';
                    
                    await pyodide.runPythonAsync(code);
                    
                    const output = window.pythonOutput;
                    
                    if (output) {
                        const lines = output.trim().split('\n');
                        let html = lines.map(line => `<div class="output-line">${escapeHtml(line)}</div>`).join('');
                        html += '<div class="output-line output-success">\n‚úÖ Execution completed successfully</div>';
                        outputContent.innerHTML = html;
                    } else {
                        outputContent.innerHTML = '<div class="output-line output-success">‚úÖ Code executed (no output)</div>';
                    }

                    showStatus('Code executed! ‚úì', 2000);
                    return;

                } catch (error) {
                    const errorMsg = error.toString();
                    outputContent.innerHTML = `<div class="output-line output-error">‚ùå Error:\n${escapeHtml(errorMsg)}</div>`;
                    showStatus('Execution error', 2000);
                    return;
                }
            }

            // Fallback: Simple Python interpreter simulation
            try {
                const result = simulatePython(code);
                if (result.output) {
                    const lines = result.output.trim().split('\n');
                    let html = lines.map(line => `<div class="output-line">${escapeHtml(line)}</div>`).join('');
                    html += '<div class="output-line output-success">\n‚úÖ Execution completed</div>';
                    outputContent.innerHTML = html;
                    showStatus('Code executed! ‚úì', 2000);
                } else if (result.error) {
                    outputContent.innerHTML = `<div class="output-line output-error">‚ùå ${escapeHtml(result.error)}</div>`;
                    showStatus('Execution error', 2000);
                } else {
                    outputContent.innerHTML = '<div class="output-line output-success">‚úÖ Code executed (no output)</div>';
                    showStatus('Code executed! ‚úì', 2000);
                }
            } catch (error) {
                outputContent.innerHTML = `<div class="output-line output-error">‚ùå Error: ${escapeHtml(error.message)}</div>`;
                showStatus('Execution error', 2000);
            }
        }

        // Fallback Python simulator for basic operations
        function simulatePython(code) {
            try {
                let output = '';
                const lines = code.split('\n');
                const variables = {};
                
                for (let line of lines) {
                    line = line.trim();
                    
                    // Skip comments and empty lines
                    if (line.startsWith('#') || !line) continue;
                    
                    // Handle print statements
                    if (line.includes('print(')) {
                        const match = line.match(/print\((.*)\)/);
                        if (match) {
                            let printContent = match[1];
                            
                            // Handle f-strings
                            if (printContent.startsWith('f"') || printContent.startsWith("f'")) {
                                printContent = printContent.substring(2, printContent.length - 1);
                                printContent = printContent.replace(/\{([^}]+)\}/g, (_, expr) => {
                                    return eval(expr.replace(/([a-zA-Z_]\w*)/g, (v) => {
                                        return variables[v] !== undefined ? variables[v] : v;
                                    }));
                                });
                                output += printContent + '\n';
                            }
                            // Handle simple strings
                            else if (printContent.startsWith('"') || printContent.startsWith("'")) {
                                output += printContent.slice(1, -1) + '\n';
                            }
                            // Handle variables and expressions
                            else {
                                const parts = printContent.split(',').map(p => p.trim());
                                const result = parts.map(part => {
                                    if (part.startsWith('"') || part.startsWith("'")) {
                                        return part.slice(1, -1);
                                    }
                                    if (variables[part] !== undefined) {
                                        return variables[part];
                                    }
                                    // Try to evaluate as expression
                                    try {
                                        const expr = part.replace(/([a-zA-Z_]\w*)/g, (v) => {
                                            return variables[v] !== undefined ? variables[v] : v;
                                        });
                                        return eval(expr);
                                    } catch {
                                        return part;
                                    }
                                }).join(' ');
                                output += result + '\n';
                            }
                        }
                    }
                    // Handle variable assignments
                    else if (line.includes('=') && !line.includes('==')) {
                        const parts = line.split('=');
                        if (parts.length === 2) {
                            const varName = parts[0].trim();
                            let value = parts[1].trim();
                            
                            // Handle string values
                            if (value.startsWith('"') || value.startsWith("'")) {
                                variables[varName] = value.slice(1, -1);
                            }
                            // Handle numeric operations
                            else {
                                try {
                                    const expr = value.replace(/([a-zA-Z_]\w*)/g, (v) => {
                                        return variables[v] !== undefined ? variables[v] : v;
                                    });
                                    variables[varName] = eval(expr);
                                } catch {
                                    variables[varName] = value;
                                }
                            }
                        }
                    }
                }
                
                return { output, error: null };
            } catch (error) {
                return { output: null, error: error.message };
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function clearOutput() {
            document.getElementById('outputContent').innerHTML = '';
            document.getElementById('outputContainer').classList.remove('active');
        }

        function showSettings() {
            document.getElementById('settingsModal').classList.add('active');
        }

        function hideSettings() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        function changeFont() {
            const font = document.getElementById('fontSelect').value;
            editor.style.fontFamily = font;
            lineNumbers.style.fontFamily = font;
            document.getElementById('outputContent').style.fontFamily = font;
            currentFont = font;
            localStorage.setItem('editorFont', font);
            showStatus('Font changed! ‚úì', 1500);
        }

        function changeFontSize() {
            const size = document.getElementById('fontSizeSelect').value;
            editor.style.fontSize = size;
            lineNumbers.style.fontSize = size;
            document.getElementById('outputContent').style.fontSize = size;
            currentFontSize = size;
            localStorage.setItem('editorFontSize', size);
            showStatus('Font size changed! ‚úì', 1500);
        }

        function changeTheme(theme) {
            document.body.className = `theme-${theme}`;
            currentTheme = theme;
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.theme === theme) {
                    option.classList.add('active');
                }
            });
            
            localStorage.setItem('editorTheme', theme);
            showStatus(`Theme: ${theme} ‚úì`, 1500);
        }

        function showSamples() {
            document.getElementById('samplesModal').classList.add('active');
        }

        function hideSamples() {
            document.getElementById('samplesModal').classList.remove('active');
        }

        function loadSample(sampleName) {
            editor.value = samples[sampleName];
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('editorContainer').classList.add('active');
            updateLineNumbers();
            hideSamples();
            showStatus('Sample loaded! ‚úì', 2000);
            editor.focus();
        }

        function showAI() {
            document.getElementById('aiModal').classList.add('active');
        }

        function hideAI() {
            document.getElementById('aiModal').classList.remove('active');
        }

        function showStatus(text, duration = 0) {
            const indicator = document.getElementById('statusIndicator');
            document.getElementById('statusText').textContent = text;
            indicator.classList.add('active');
            
            if (duration > 0) {
                setTimeout(() => {
                    indicator.classList.remove('active');
                }, duration);
            }
        }

        // Load saved preferences
        window.addEventListener('load', () => {
            const savedFont = localStorage.getItem('editorFont');
            const savedFontSize = localStorage.getItem('editorFontSize');
            const savedTheme = localStorage.getItem('editorTheme');

            if (savedFont) {
                document.getElementById('fontSelect').value = savedFont;
                currentFont = savedFont;
                editor.style.fontFamily = savedFont;
                lineNumbers.style.fontFamily = savedFont;
                document.getElementById('outputContent').style.fontFamily = savedFont;
            }
            if (savedFontSize) {
                document.getElementById('fontSizeSelect').value = savedFontSize;
                currentFontSize = savedFontSize;
                editor.style.fontSize = savedFontSize;
                lineNumbers.style.fontSize = savedFontSize;
                document.getElementById('outputContent').style.fontSize = savedFontSize;
            }
            if (savedTheme) {
                changeTheme(savedTheme);
            }
        });
    </script>
</body>
</html>
